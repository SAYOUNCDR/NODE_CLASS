<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        :root {
            --bg: #f6f6f7;
            --card: #ffffff;
            --muted: #8b8b8b;
            --accent: #ff6b56;
            /* warm coral accent, not blue/violet/aqua */
            --border: #e7e7e7;
            --shadow: 0 6px 18px rgba(20, 20, 20, 0.06);
            --radius: 12px;
            --max-width: 720px;
            --mono: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            background: var(--bg);
            font-family: var(--mono);
            color: #222;
        }

        .wrap {
            max-width: var(--max-width);
            margin: 40px auto;
            padding: 28px;
            box-sizing: border-box;
        }

        .card {
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            border: 1px solid var(--border);
        }

        header {
            display: flex;
            align-items: center;
            gap: 14px;
            margin-bottom: 12px;
        }

        header h1 {
            font-size: 18px;
            margin: 0;
            letter-spacing: 0.2px;
        }

        /* Form */
        form#form1 {
            display: flex;
            gap: 12px;
            align-items: center;
            width: 100%;
            margin-bottom: 14px;
        }

        label {
            display: none
        }

        input[type="text"] {
            flex: 1 1 auto;
            min-width: 0;
            /* allow input to shrink inside flex container to avoid overflow */
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: #fbfbfb;
            outline: none;
            font-size: 14px;
            transition: box-shadow .15s ease, border-color .15s ease;
        }

        input[type="text"]:focus {
            box-shadow: 0 4px 12px rgba(255, 107, 86, 0.09);
            border-color: rgba(255, 107, 86, 0.6);
        }

        button.send {
            background: var(--accent);
            color: #fff;
            border: none;
            padding: 10px 14px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            box-shadow: 0 6px 12px rgba(255, 107, 86, 0.12);
        }

        button.send:active {
            transform: translateY(1px)
        }

        /* Chat area */
        #div1 {
            width: 100%;
            height: 520px;
            border-radius: 10px;
            padding: 18px;
            overflow-y: auto;
            /* vertical scroll only */
            overflow-x: hidden;
            /* prevent horizontal overflow */
            word-break: break-word;
            /* break long words/URLs */
            overflow-wrap: anywhere;
            /* allow wrapping anywhere to avoid overflow */
            white-space: pre-wrap;
            /* preserve line breaks but allow wrapping */
            background: linear-gradient(180deg, #fbfbfb, #f7f7f7);
            border: 1px solid var(--border);
            font-size: 14px;
            line-height: 1.45;
            color: #222;
            box-sizing: border-box;
        }

        /* Username styling (inserted as <b>username</b> by the script) */
        #div1 b {
            display: inline-block;
            color: var(--accent);
            font-weight: 700;
            margin-top: 6px;
        }

        /* Message lines (script inserts raw text + <br>) */
        #div1 .meta {
            color: var(--muted);
            font-size: 12px
        }

        /* Small subtle footer */
        .footer {
            margin-top: 10px;
            font-size: 12px;
            color: var(--muted);
            text-align: right
        }

        @media (max-width:600px) {
            .wrap {
                padding: 16px
            }

            #div1 {
                height: 360px
            }

            header h1 {
                font-size: 16px
            }
        }
    </style>
</head>

<body>
    <div class="wrap">
        <div class="card">
            <header>
                <h1>Minimal Chat</h1>
            </header>

            <form action="post" id="form1" autocomplete="off">
                <input type="text" id="uname" placeholder="Your name" aria-label="username">
                <input type="text" id="message" placeholder="Write a message..." aria-label="message">
                <button class="send" type="submit">Send</button>
            </form>

            <div id="div1" role="log" aria-live="polite"></div>

            <div class="footer">Press Enter to send â€¢ Keep names short</div>
        </div>
    </div>
    <script>
        const socket = io();
        var form = document.getElementById('form1');
        var username = document.getElementById('uname');
        var message = document.getElementById('message');
        var chat = document.getElementById('div1');

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            if (username.value && message.value) {
                socket.emit('myname', username.value);
                socket.emit('chatm', message.value);
                message.value = '';
            }
        });

        socket.on('myname', (username) => {
            chat.innerHTML += `<b>${username}</b><br>`;
        })

        socket.on('chatm', (message) => {
            chat.innerHTML += `${message}<br>`;
            chat.scrollTop = chat.scrollHeight;
        })
    </script>
</body>

</html>